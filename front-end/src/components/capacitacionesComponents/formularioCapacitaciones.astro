---
import ModalFormularios from "../modalFormularios.astro";
---

<section
  class="relative w-full h-[auto] flex flex-row justify-center pt-10 sm:pt-15 md:pt-20 lg:pt-32 pb-5 sm:pb-10 md:pb-15 lg:pb-20"
>
  <div class="flex flex-col justify-center align-center text-[#545151]">
    <h1
      class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-extrabold leading-tight text-center"
    >
      Dejanos tus datos, nosotros <br />
      nos comunicamos con vos
    </h1>
    <h2
      class="text-sm sm:text-md md:text-lg lg:text-xl xl:text-2xl leading-tight text-center pt-3 md:pt-5"
    >
      Te enviamos información sobre <br />
      nuevas capacitaciones
    </h2>

    <form
      id="form-capacitaciones"
      class="w-full mx-auto pt-10 md:pt-15 lg:pt-15"
    >
      <div class="mb-8">
        <label
          for="nombreApellido"
          class="block mb-2 text-xs sm:text-sm md:text-md font-medium text-gray-900 dark:text-[#545151]"
          >Nombre y Apellido*</label
        >
        <input
          type="text"
          id="nombreApellido"
          name="nombreApellido"
          class="bg-transparent hover:bg-gray-300/50 border-0 border-b border-gray-300 text-gray-900 text-sm focus:ring-0 focus:border-gray-500 block w-[80%] md:w-[90%] lg:w-full p-2.5 dark:border-gray-400 dark:placeholder-gray-400 dark:text-black dark:focus:border-gray-500 transition-colors duration-200"
          placeholder="Juan Pérez"
          required
        />
      </div>
      <div class="mb-8">
        <label
          for="email"
          class="block mb-2 text-xs sm:text-sm md:text-md font-medium text-gray-900 dark:text-[#545151]"
          >E-mail</label
        >
        <input
          type="email"
          id="email"
          name="email"
          class="bg-transparent hover:bg-gray-300/50 border-0 border-b border-gray-300 text-gray-900 text-sm focus:ring-0 focus:border-gray-500 block w-[80%] md:w-[90%] lg:w-full p-2.5 dark:border-gray-400 dark:placeholder-gray-400 dark:text-black dark:focus:border-gray-500 transition-colors duration-200"
          placeholder="usuario@ejemplo.com"
          required
        />
      </div>

      <div class="mb-8">
        <label
          for="telefono"
          class="block mb-2 text-xs sm:text-sm md:text-md font-medium text-gray-900 dark:text-[#545151]"
          >Teléfono*</label
        >
        <input
          type="tel"
          id="telefono"
          name="telefono"
          class="bg-transparent hover:bg-gray-300/50 border-0 border-b border-gray-300 text-gray-900 text-sm focus:ring-0 focus:border-gray-500 block w-[80%] md:w-[90%] lg:w-full p-2.5 dark:border-gray-400 dark:placeholder-gray-400 dark:text-black dark:focus:border-gray-500 transition-colors duration-200"
          placeholder="(123) 456-7890"
          required
        />
      </div>

      <div class="flex justify-center mb-8">
        <button
          id="btn-submit-capacitaciones"
          type="submit"
          class="text-white bg-orange-500 hover:bg-orange-600 focus:ring-4 focus:outline-none focus:ring-orange-300 font-medium rounded-lg text-lg w-[50%] px-12 py-2 text-center dark:bg-orange-500 dark:hover:bg-orange-700 dark:focus:ring-orange-600"
          >Enviar</button
        >
      </div>
      <ModalFormularios id="modal-formularios" />
    </form>
  </div>
</section>

<script>
  import { FormHandler } from "../../utils/formHandler.js";
  import { capacitacionesSchema } from "../../validation";
  import { Modal } from "flowbite";

  // Inicializar el manejador de formularios cuando el DOM esté listo
  document.addEventListener("DOMContentLoaded", () => {
    const modalElement = document.getElementById("modal-formularios");
    const modal = new Modal(modalElement);

    const formHandler = new FormHandler();

    formHandler.setupForm("form-capacitaciones", capacitacionesSchema, {
      type: "capacitaciones",
      onSuccess: () => {
        modal.show();
      },
      errorMessage:
        "Hubo un error al enviar el formulario. Por favor, intentá nuevamente.",
    });
  });
</script>
